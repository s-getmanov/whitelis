import{_ as w,c as v,a as t,f as d,w as b,d as h,t as o,n as T,g as l,i as C,b as u,j as k,p as D,o as L,u as N,k as S,e as g}from"./index.js";const P={name:"NewsSingle",setup(){const m=N(),s=u({}),c=u(!0),e=u(null),_=k(()=>D.sanitize(s.value.content||"",{ALLOWED_TAGS:["b","i","strong","em","a","p","br","img","h1","h2","h3","ul","ol","li","div","span"],ALLOWED_ATTR:["href","target","rel","src","alt","title","class","style"]})),p=async()=>{c.value=!0,e.value=null;try{const i=m.params.slug,a=await S.getBySlug(i);s.value=a}catch(i){e.value=i.message||"Публикация не найдена",console.error("Ошибка загрузки публикации:",i)}finally{c.value=!1}},n=i=>{if(!i)return"";const a=new Date(i),x={day:"numeric",month:"long",year:"numeric"};return a.toLocaleDateString("ru-RU",x)},r=i=>({news:"primary",announcement:"success",article:"warning",page:"info"})[i]||"secondary",y=i=>({news:"Новость",announcement:"Анонс",article:"Статья",page:"Страница"})[i]||i,f=()=>{const i=window.location.href;`${s.value.title}`,navigator.share?navigator.share({title:s.value.title,text:s.value.excerpt,url:i}):(navigator.clipboard.writeText(i),alert("Ссылка скопирована в буфер обмена!"))};return L(()=>{p()}),{publication:s,loading:c,error:e,sanitizedContent:_,formatDate:n,getTypeColor:r,getTypeText:y,sharePublication:f}}},z={class:"news-single"},A={class:"py-5 bg-light"},B={class:"container"},V={class:"row"},E={class:"col-lg-8 mx-auto"},M={"aria-label":"breadcrumb",class:"mb-3"},R={class:"breadcrumb"},j={class:"breadcrumb-item"},H={class:"breadcrumb-item"},O={class:"breadcrumb-item active","aria-current":"page"},W={class:"d-flex align-items-center gap-3 mb-4"},q={class:"text-muted"},G={class:"text-muted"},I={class:"display-6 fw-bold mb-4"},U={class:"d-flex align-items-center gap-3"},F={class:"fw-semibold"},J={class:"container py-5"},K={class:"row"},Q={class:"col-lg-8 mx-auto"},X={key:0,class:"card border-0 bg-light mb-5"},Y={class:"card-body"},Z={class:"mb-0 lead",style:{"font-style":"italic"}},$={class:"publication-content mb-5"},tt=["innerHTML"],st={class:"border-top pt-4"},et={class:"row"},it={class:"col-md-6 mb-3"},ot={class:"d-flex align-items-center"},lt={class:"col-md-6 mb-3"},nt={class:"d-flex align-items-center"},at={class:"d-flex justify-content-between mt-5 pt-4 border-top"};function ct(m,s,c,e,_,p){const n=h("router-link");return g(),v("div",z,[t("div",A,[t("div",B,[t("div",V,[t("div",E,[t("nav",M,[t("ol",R,[t("li",j,[d(n,{to:"/"},{default:b(()=>[...s[1]||(s[1]=[l("Главная",-1)])]),_:1})]),t("li",H,[d(n,{to:"/news"},{default:b(()=>[...s[2]||(s[2]=[l("Новости",-1)])]),_:1})]),t("li",O,o(e.publication.title),1)])]),t("div",W,[t("span",{class:T(`badge bg-${e.getTypeColor(e.publication.type)}`)},o(e.getTypeText(e.publication.type)),3),t("small",q,[s[3]||(s[3]=t("i",{class:"bi bi-calendar3 me-1"},null,-1)),l(" "+o(e.formatDate(e.publication.published_at)),1)]),t("small",G,[s[4]||(s[4]=t("i",{class:"bi bi-eye me-1"},null,-1)),l(" "+o(e.publication.views_count||0)+" просмотров ",1)])]),t("h1",I,o(e.publication.title),1),t("div",U,[s[6]||(s[6]=t("div",{class:"bg-secondary bg-opacity-10 rounded-circle p-2"},[t("i",{class:"bi bi-person-circle text-secondary"})],-1)),t("div",null,[t("div",F,o(e.publication.author?.name||"Автор"),1),s[5]||(s[5]=t("div",{class:"text-muted small"},"Автор публикации",-1))])])])])])]),t("div",J,[t("div",K,[t("div",Q,[e.publication.excerpt?(g(),v("div",X,[t("div",Y,[s[7]||(s[7]=t("h6",{class:"fw-bold text-muted mb-2"},[t("i",{class:"bi bi-quote me-2"}),l("Краткое содержание ")],-1)),t("p",Z,o(e.publication.excerpt),1)])])):C("",!0),t("div",$,[t("div",{innerHTML:e.sanitizedContent},null,8,tt)]),t("div",st,[t("div",et,[t("div",it,[t("div",ot,[s[9]||(s[9]=t("div",{class:"bg-primary bg-opacity-10 rounded-circle p-2 me-3"},[t("i",{class:"bi bi-tags text-primary"})],-1)),t("div",null,[s[8]||(s[8]=t("div",{class:"fw-semibold small"},"Категория",-1)),t("div",null,o(e.getTypeText(e.publication.type)),1)])])]),t("div",lt,[t("div",nt,[s[11]||(s[11]=t("div",{class:"bg-success bg-opacity-10 rounded-circle p-2 me-3"},[t("i",{class:"bi bi-clock text-success"})],-1)),t("div",null,[s[10]||(s[10]=t("div",{class:"fw-semibold small"},"Дата публикации",-1)),t("div",null,o(e.formatDate(e.publication.published_at)),1)])])])])]),t("div",at,[d(n,{to:"/news",class:"btn btn-outline-secondary"},{default:b(()=>[...s[12]||(s[12]=[t("i",{class:"bi bi-arrow-left me-2"},null,-1),l(" Назад к списку ",-1)])]),_:1}),t("button",{class:"btn btn-outline-primary",onClick:s[0]||(s[0]=(...r)=>e.sharePublication&&e.sharePublication(...r))},[...s[13]||(s[13]=[t("i",{class:"bi bi-share me-2"},null,-1),l(" Поделиться ",-1)])])])])])])])}const dt=w(P,[["render",ct],["__scopeId","data-v-60e7e970"]]);export{dt as default};
